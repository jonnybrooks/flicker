<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<title>Flicker Example Animation</title>		
		<meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="css/main.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div id="flicker1" class="flicker">
			<canvas class="canvas" width="560" height="420"></canvas>
			<div class="controls">
				<input type="range" min="0" max="1" value="0" step="1" oninput="this.setAttribute('value', this.value);"/>
			</div>
			<div class="sprites" style="display: none;">
				<img class="sprite" src="flicker/sequence001_sprite.jpg" alt=" "/>
				<img class="sprite" src="flicker/sequence002_sprite.jpg" alt=" "/>
			</div>		
		</div>				
		<script type="text/javascript" src="js/dist/flicker.min.js"></script>
		<script type="text/javascript">

			// copy flicker_map.json into a variable here

			var map = {"frames":[{"src":"sequence001_sprite.jpg","x":0,"y":0},{"src":"sequence001_sprite.jpg","x":560,"y":0},{"src":"sequence001_sprite.jpg","x":1120,"y":0},{"src":"sequence001_sprite.jpg","x":1680,"y":0},{"src":"sequence001_sprite.jpg","x":2240,"y":0},{"src":"sequence001_sprite.jpg","x":2800,"y":0},{"src":"sequence001_sprite.jpg","x":3360,"y":0},{"src":"sequence001_sprite.jpg","x":3920,"y":0},{"src":"sequence001_sprite.jpg","x":4480,"y":0},{"src":"sequence001_sprite.jpg","x":5040,"y":0},{"src":"sequence001_sprite.jpg","x":5600,"y":0},{"src":"sequence001_sprite.jpg","x":6160,"y":0},{"src":"sequence001_sprite.jpg","x":6720,"y":0},{"src":"sequence001_sprite.jpg","x":7280,"y":0},{"src":"sequence001_sprite.jpg","x":7840,"y":0},{"src":"sequence001_sprite.jpg","x":8400,"y":0},{"src":"sequence001_sprite.jpg","x":8960,"y":0},{"src":"sequence001_sprite.jpg","x":9520,"y":0},{"src":"sequence001_sprite.jpg","x":0,"y":420},{"src":"sequence001_sprite.jpg","x":560,"y":420},{"src":"sequence001_sprite.jpg","x":1120,"y":420},{"src":"sequence001_sprite.jpg","x":1680,"y":420},{"src":"sequence001_sprite.jpg","x":2240,"y":420},{"src":"sequence001_sprite.jpg","x":2800,"y":420},{"src":"sequence001_sprite.jpg","x":3360,"y":420},{"src":"sequence001_sprite.jpg","x":3920,"y":420},{"src":"sequence001_sprite.jpg","x":4480,"y":420},{"src":"sequence001_sprite.jpg","x":5040,"y":420},{"src":"sequence001_sprite.jpg","x":5600,"y":420},{"src":"sequence001_sprite.jpg","x":6160,"y":420},{"src":"sequence001_sprite.jpg","x":6720,"y":420},{"src":"sequence001_sprite.jpg","x":7280,"y":420},{"src":"sequence001_sprite.jpg","x":7840,"y":420},{"src":"sequence001_sprite.jpg","x":8400,"y":420},{"src":"sequence001_sprite.jpg","x":8960,"y":420},{"src":"sequence001_sprite.jpg","x":9520,"y":420},{"src":"sequence001_sprite.jpg","x":0,"y":840},{"src":"sequence001_sprite.jpg","x":560,"y":840},{"src":"sequence001_sprite.jpg","x":1120,"y":840},{"src":"sequence001_sprite.jpg","x":1680,"y":840},{"src":"sequence001_sprite.jpg","x":2240,"y":840},{"src":"sequence001_sprite.jpg","x":2800,"y":840},{"src":"sequence001_sprite.jpg","x":3360,"y":840},{"src":"sequence001_sprite.jpg","x":3920,"y":840},{"src":"sequence001_sprite.jpg","x":4480,"y":840},{"src":"sequence001_sprite.jpg","x":5040,"y":840},{"src":"sequence001_sprite.jpg","x":5600,"y":840},{"src":"sequence001_sprite.jpg","x":6160,"y":840},{"src":"sequence001_sprite.jpg","x":6720,"y":840},{"src":"sequence001_sprite.jpg","x":7280,"y":840},{"src":"sequence001_sprite.jpg","x":7840,"y":840},{"src":"sequence001_sprite.jpg","x":8400,"y":840},{"src":"sequence001_sprite.jpg","x":8960,"y":840},{"src":"sequence001_sprite.jpg","x":9520,"y":840},{"src":"sequence001_sprite.jpg","x":0,"y":1260},{"src":"sequence001_sprite.jpg","x":560,"y":1260},{"src":"sequence001_sprite.jpg","x":1120,"y":1260},{"src":"sequence001_sprite.jpg","x":1680,"y":1260},{"src":"sequence001_sprite.jpg","x":2240,"y":1260},{"src":"sequence001_sprite.jpg","x":2800,"y":1260},{"src":"sequence001_sprite.jpg","x":3360,"y":1260},{"src":"sequence001_sprite.jpg","x":3920,"y":1260},{"src":"sequence001_sprite.jpg","x":4480,"y":1260},{"src":"sequence001_sprite.jpg","x":5040,"y":1260},{"src":"sequence001_sprite.jpg","x":5600,"y":1260},{"src":"sequence001_sprite.jpg","x":6160,"y":1260},{"src":"sequence001_sprite.jpg","x":6720,"y":1260},{"src":"sequence001_sprite.jpg","x":7280,"y":1260},{"src":"sequence001_sprite.jpg","x":7840,"y":1260},{"src":"sequence001_sprite.jpg","x":8400,"y":1260},{"src":"sequence001_sprite.jpg","x":8960,"y":1260},{"src":"sequence001_sprite.jpg","x":9520,"y":1260},{"src":"sequence001_sprite.jpg","x":0,"y":1680},{"src":"sequence001_sprite.jpg","x":560,"y":1680},{"src":"sequence001_sprite.jpg","x":1120,"y":1680},{"src":"sequence001_sprite.jpg","x":1680,"y":1680},{"src":"sequence001_sprite.jpg","x":2240,"y":1680},{"src":"sequence001_sprite.jpg","x":2800,"y":1680},{"src":"sequence001_sprite.jpg","x":3360,"y":1680},{"src":"sequence001_sprite.jpg","x":3920,"y":1680},{"src":"sequence001_sprite.jpg","x":4480,"y":1680},{"src":"sequence001_sprite.jpg","x":5040,"y":1680},{"src":"sequence001_sprite.jpg","x":5600,"y":1680},{"src":"sequence001_sprite.jpg","x":6160,"y":1680},{"src":"sequence001_sprite.jpg","x":6720,"y":1680},{"src":"sequence001_sprite.jpg","x":7280,"y":1680},{"src":"sequence001_sprite.jpg","x":7840,"y":1680},{"src":"sequence001_sprite.jpg","x":8400,"y":1680},{"src":"sequence001_sprite.jpg","x":8960,"y":1680},{"src":"sequence001_sprite.jpg","x":9520,"y":1680},{"src":"sequence001_sprite.jpg","x":0,"y":2100},{"src":"sequence001_sprite.jpg","x":560,"y":2100},{"src":"sequence001_sprite.jpg","x":1120,"y":2100},{"src":"sequence001_sprite.jpg","x":1680,"y":2100},{"src":"sequence001_sprite.jpg","x":2240,"y":2100},{"src":"sequence001_sprite.jpg","x":2800,"y":2100},{"src":"sequence001_sprite.jpg","x":3360,"y":2100},{"src":"sequence001_sprite.jpg","x":3920,"y":2100},{"src":"sequence001_sprite.jpg","x":4480,"y":2100},{"src":"sequence001_sprite.jpg","x":5040,"y":2100},{"src":"sequence001_sprite.jpg","x":5600,"y":2100},{"src":"sequence001_sprite.jpg","x":6160,"y":2100},{"src":"sequence001_sprite.jpg","x":6720,"y":2100},{"src":"sequence001_sprite.jpg","x":7280,"y":2100},{"src":"sequence001_sprite.jpg","x":7840,"y":2100},{"src":"sequence001_sprite.jpg","x":8400,"y":2100},{"src":"sequence001_sprite.jpg","x":8960,"y":2100},{"src":"sequence001_sprite.jpg","x":9520,"y":2100},{"src":"sequence001_sprite.jpg","x":0,"y":2520},{"src":"sequence001_sprite.jpg","x":560,"y":2520},{"src":"sequence001_sprite.jpg","x":1120,"y":2520},{"src":"sequence001_sprite.jpg","x":1680,"y":2520},{"src":"sequence001_sprite.jpg","x":2240,"y":2520},{"src":"sequence001_sprite.jpg","x":2800,"y":2520},{"src":"sequence001_sprite.jpg","x":3360,"y":2520},{"src":"sequence001_sprite.jpg","x":3920,"y":2520},{"src":"sequence001_sprite.jpg","x":4480,"y":2520},{"src":"sequence001_sprite.jpg","x":5040,"y":2520},{"src":"sequence002_sprite.jpg","x":0,"y":0},{"src":"sequence002_sprite.jpg","x":560,"y":0},{"src":"sequence002_sprite.jpg","x":1120,"y":0},{"src":"sequence002_sprite.jpg","x":1680,"y":0},{"src":"sequence002_sprite.jpg","x":2240,"y":0},{"src":"sequence002_sprite.jpg","x":2800,"y":0},{"src":"sequence002_sprite.jpg","x":3360,"y":0},{"src":"sequence002_sprite.jpg","x":3920,"y":0},{"src":"sequence002_sprite.jpg","x":4480,"y":0},{"src":"sequence002_sprite.jpg","x":5040,"y":0},{"src":"sequence002_sprite.jpg","x":5600,"y":0},{"src":"sequence002_sprite.jpg","x":6160,"y":0},{"src":"sequence002_sprite.jpg","x":6720,"y":0},{"src":"sequence002_sprite.jpg","x":7280,"y":0},{"src":"sequence002_sprite.jpg","x":7840,"y":0},{"src":"sequence002_sprite.jpg","x":8400,"y":0},{"src":"sequence002_sprite.jpg","x":8960,"y":0},{"src":"sequence002_sprite.jpg","x":9520,"y":0},{"src":"sequence002_sprite.jpg","x":0,"y":420},{"src":"sequence002_sprite.jpg","x":560,"y":420},{"src":"sequence002_sprite.jpg","x":1120,"y":420},{"src":"sequence002_sprite.jpg","x":1680,"y":420},{"src":"sequence002_sprite.jpg","x":2240,"y":420},{"src":"sequence002_sprite.jpg","x":2800,"y":420},{"src":"sequence002_sprite.jpg","x":3360,"y":420},{"src":"sequence002_sprite.jpg","x":3920,"y":420},{"src":"sequence002_sprite.jpg","x":4480,"y":420},{"src":"sequence002_sprite.jpg","x":5040,"y":420},{"src":"sequence002_sprite.jpg","x":5600,"y":420},{"src":"sequence002_sprite.jpg","x":6160,"y":420},{"src":"sequence002_sprite.jpg","x":6720,"y":420},{"src":"sequence002_sprite.jpg","x":7280,"y":420},{"src":"sequence002_sprite.jpg","x":7840,"y":420},{"src":"sequence002_sprite.jpg","x":8400,"y":420},{"src":"sequence002_sprite.jpg","x":8960,"y":420},{"src":"sequence002_sprite.jpg","x":9520,"y":420},{"src":"sequence002_sprite.jpg","x":0,"y":840},{"src":"sequence002_sprite.jpg","x":560,"y":840},{"src":"sequence002_sprite.jpg","x":1120,"y":840},{"src":"sequence002_sprite.jpg","x":1680,"y":840},{"src":"sequence002_sprite.jpg","x":2240,"y":840},{"src":"sequence002_sprite.jpg","x":2800,"y":840},{"src":"sequence002_sprite.jpg","x":3360,"y":840},{"src":"sequence002_sprite.jpg","x":3920,"y":840},{"src":"sequence002_sprite.jpg","x":4480,"y":840},{"src":"sequence002_sprite.jpg","x":5040,"y":840},{"src":"sequence002_sprite.jpg","x":5600,"y":840},{"src":"sequence002_sprite.jpg","x":6160,"y":840},{"src":"sequence002_sprite.jpg","x":6720,"y":840},{"src":"sequence002_sprite.jpg","x":7280,"y":840},{"src":"sequence002_sprite.jpg","x":7840,"y":840},{"src":"sequence002_sprite.jpg","x":8400,"y":840},{"src":"sequence002_sprite.jpg","x":8960,"y":840},{"src":"sequence002_sprite.jpg","x":9520,"y":840},{"src":"sequence002_sprite.jpg","x":0,"y":1260},{"src":"sequence002_sprite.jpg","x":560,"y":1260},{"src":"sequence002_sprite.jpg","x":1120,"y":1260},{"src":"sequence002_sprite.jpg","x":1680,"y":1260},{"src":"sequence002_sprite.jpg","x":2240,"y":1260},{"src":"sequence002_sprite.jpg","x":2800,"y":1260},{"src":"sequence002_sprite.jpg","x":3360,"y":1260},{"src":"sequence002_sprite.jpg","x":3920,"y":1260},{"src":"sequence002_sprite.jpg","x":4480,"y":1260},{"src":"sequence002_sprite.jpg","x":5040,"y":1260},{"src":"sequence002_sprite.jpg","x":5600,"y":1260},{"src":"sequence002_sprite.jpg","x":6160,"y":1260},{"src":"sequence002_sprite.jpg","x":6720,"y":1260},{"src":"sequence002_sprite.jpg","x":7280,"y":1260},{"src":"sequence002_sprite.jpg","x":7840,"y":1260},{"src":"sequence002_sprite.jpg","x":8400,"y":1260},{"src":"sequence002_sprite.jpg","x":8960,"y":1260},{"src":"sequence002_sprite.jpg","x":9520,"y":1260},{"src":"sequence002_sprite.jpg","x":0,"y":1680},{"src":"sequence002_sprite.jpg","x":560,"y":1680},{"src":"sequence002_sprite.jpg","x":1120,"y":1680},{"src":"sequence002_sprite.jpg","x":1680,"y":1680},{"src":"sequence002_sprite.jpg","x":2240,"y":1680},{"src":"sequence002_sprite.jpg","x":2800,"y":1680},{"src":"sequence002_sprite.jpg","x":3360,"y":1680},{"src":"sequence002_sprite.jpg","x":3920,"y":1680},{"src":"sequence002_sprite.jpg","x":4480,"y":1680},{"src":"sequence002_sprite.jpg","x":5040,"y":1680},{"src":"sequence002_sprite.jpg","x":5600,"y":1680},{"src":"sequence002_sprite.jpg","x":6160,"y":1680},{"src":"sequence002_sprite.jpg","x":6720,"y":1680},{"src":"sequence002_sprite.jpg","x":7280,"y":1680},{"src":"sequence002_sprite.jpg","x":7840,"y":1680},{"src":"sequence002_sprite.jpg","x":8400,"y":1680},{"src":"sequence002_sprite.jpg","x":8960,"y":1680},{"src":"sequence002_sprite.jpg","x":9520,"y":1680},{"src":"sequence002_sprite.jpg","x":0,"y":2100},{"src":"sequence002_sprite.jpg","x":560,"y":2100},{"src":"sequence002_sprite.jpg","x":1120,"y":2100},{"src":"sequence002_sprite.jpg","x":1680,"y":2100},{"src":"sequence002_sprite.jpg","x":2240,"y":2100},{"src":"sequence002_sprite.jpg","x":2800,"y":2100},{"src":"sequence002_sprite.jpg","x":3360,"y":2100},{"src":"sequence002_sprite.jpg","x":3920,"y":2100},{"src":"sequence002_sprite.jpg","x":4480,"y":2100},{"src":"sequence002_sprite.jpg","x":5040,"y":2100},{"src":"sequence002_sprite.jpg","x":5600,"y":2100},{"src":"sequence002_sprite.jpg","x":6160,"y":2100},{"src":"sequence002_sprite.jpg","x":6720,"y":2100},{"src":"sequence002_sprite.jpg","x":7280,"y":2100},{"src":"sequence002_sprite.jpg","x":7840,"y":2100},{"src":"sequence002_sprite.jpg","x":8400,"y":2100},{"src":"sequence002_sprite.jpg","x":8960,"y":2100},{"src":"sequence002_sprite.jpg","x":9520,"y":2100},{"src":"sequence002_sprite.jpg","x":0,"y":2520},{"src":"sequence002_sprite.jpg","x":560,"y":2520},{"src":"sequence002_sprite.jpg","x":1120,"y":2520},{"src":"sequence002_sprite.jpg","x":1680,"y":2520},{"src":"sequence002_sprite.jpg","x":2240,"y":2520},{"src":"sequence002_sprite.jpg","x":2800,"y":2520},{"src":"sequence002_sprite.jpg","x":3360,"y":2520},{"src":"sequence002_sprite.jpg","x":3920,"y":2520},{"src":"sequence002_sprite.jpg","x":4480,"y":2520},{"src":"sequence002_sprite.jpg","x":5040,"y":2520},{"src":"sequence002_sprite.jpg","x":5600,"y":2520},{"src":"sequence002_sprite.jpg","x":6160,"y":2520},{"src":"sequence002_sprite.jpg","x":6720,"y":2520},{"src":"sequence002_sprite.jpg","x":7280,"y":2520},{"src":"sequence002_sprite.jpg","x":7840,"y":2520},{"src":"sequence002_sprite.jpg","x":8400,"y":2520},{"src":"sequence002_sprite.jpg","x":8960,"y":2520},{"src":"sequence002_sprite.jpg","x":9520,"y":2520},{"src":"sequence002_sprite.jpg","x":0,"y":2940},{"src":"sequence002_sprite.jpg","x":560,"y":2940},{"src":"sequence002_sprite.jpg","x":1120,"y":2940},{"src":"sequence002_sprite.jpg","x":1680,"y":2940},{"src":"sequence002_sprite.jpg","x":2240,"y":2940},{"src":"sequence002_sprite.jpg","x":2800,"y":2940},{"src":"sequence002_sprite.jpg","x":3360,"y":2940},{"src":"sequence002_sprite.jpg","x":3920,"y":2940},{"src":"sequence002_sprite.jpg","x":4480,"y":2940},{"src":"sequence002_sprite.jpg","x":5040,"y":2940},{"src":"sequence002_sprite.jpg","x":5600,"y":2940},{"src":"sequence002_sprite.jpg","x":6160,"y":2940},{"src":"sequence002_sprite.jpg","x":6720,"y":2940},{"src":"sequence002_sprite.jpg","x":7280,"y":2940},{"src":"sequence002_sprite.jpg","x":7840,"y":2940},{"src":"sequence002_sprite.jpg","x":8400,"y":2940},{"src":"sequence002_sprite.jpg","x":8960,"y":2940},{"src":"sequence002_sprite.jpg","x":9520,"y":2940},{"src":"sequence002_sprite.jpg","x":0,"y":3360},{"src":"sequence002_sprite.jpg","x":560,"y":3360}]}

			// register the Flicker object

			var myFlicker = new Flicker({
				animation: map, // specify the frame coordinate map
				rootPath: 'flicker/', // specify the root path for the sprites (defaults to flicker/)
				container: document.getElementById('flicker1') // specify the context for the flicker
			});

			// flicker provides a utility called waitOnImages which waits for the source sprites to load
			// this is necessary when using high res images, as playing the animation before the images
			// have loaded results in the canvas drawing a blank image

			myFlicker.utils.waitOnImages(function () {
				console.log('done loading');

				/*  
					BACKGROUND LOOP EXAMPLE
				    play from current frame (defaults to frame 0 (the beginning)), 
					then register an event handler on flickerEnd to play the flicker
					from the beginning whenever the flicker finishes
				*/

				this.play();
				this.on('flickerEnd', function(direction){
					console.log('flicker ended whilst playing %s', direction);
					this.play(0); // play from the beginning
				});

				/*  
					ILLUSTRATIVE EXAMPLE
				    play from current frame, wait for 2 seconds, pause, wait for 3 seconds,
					reverse from current frame, wait for one second, play from frame 0 (the beginning)
				*/

				// this.play().wait(2).pause().wait(3).reverse().wait(1).play(0);
							
			});

			// naturally, event handlers can also be registered outside the
			// waitOnImages function, directly on the flicker object
			// the sequenceChange event is emitted whenever the flicker transitions
			// from one sequence to another
			
			myFlicker.on('sequenceChange', function(seq){
				console.log('transitioned to sprite sequence: %s', seq);
				/*  
					STOP PLAYTHROUGH EXAMPLE
					pauses between each sequence, requiring manual replaying
					to continue the flicker (perhaps triggered by a scroll event?)
				*/
				
				// this.pause(); 
			});	

		</script>
	</body>
</html>