<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=Edge">
		<title>Flicker Example Animation</title>		
		<meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="css/main.css" rel="stylesheet" type="text/css">
	</head>
	<body>
		<div id="flicker">
			<canvas class="canvas" height="841" width="1121"></canvas>
			<div class="controls">
				<input type="range" min="0" max="1" value="0" step="1" oninput="this.setAttribute('value', this.value);"/>
			</div>
			<div class="sprites" style="display: none;">
				<img class="sprite" src="flicker/sequence001_sprite.jpg" alt=" "/>
				<img class="sprite" src="flicker/sequence002_sprite.jpg" alt=" "/>
			</div>		
		</div>				
		<script type="text/javascript" src="js/dist/flicker.min.js"></script>
		<script type="text/javascript">

			// copy flicker_map.json into a variable here

			var map = { "frames": [{ "src": "sequence001_sprite.jpg", "x": 0, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 0 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 840 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 1680 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 2520 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 3360 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 4200 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 5040 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 6720, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 7840, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 8960, "y": 5880 }, { "src": "sequence001_sprite.jpg", "x": 0, "y": 6720 }, { "src": "sequence001_sprite.jpg", "x": 1120, "y": 6720 }, { "src": "sequence001_sprite.jpg", "x": 2240, "y": 6720 }, { "src": "sequence001_sprite.jpg", "x": 3360, "y": 6720 }, { "src": "sequence001_sprite.jpg", "x": 4480, "y": 6720 }, { "src": "sequence001_sprite.jpg", "x": 5600, "y": 6720 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 0 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 840 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 1680 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 2520 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 3360 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 4200 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 2240, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 3360, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 4480, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 5600, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 6720, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 7840, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 8960, "y": 5040 }, { "src": "sequence002_sprite.jpg", "x": 0, "y": 5880 }, { "src": "sequence002_sprite.jpg", "x": 1120, "y": 5880 }] };

			// register the Flicker object

			var myFlicker = new Flicker({
				animation: map, // specify the frame coordinate map
				rootPath: 'flicker/', // specify the root path for the sprites (defaults to flicker/)
				container: document.getElementById('flicker') // specify the context for the flicker
			});

			// flicker provides a utility called waitOnImages which waits for the source sprites to load
			// this is necessary when using high res images, as playing the animation before the images
			// have loaded results in the canvas drawing a blank image

			myFlicker.utils.waitOnImages(function () {
				console.log('done loading');
				// play from current frame, wait for 2 seconds, pause, wait for 3 seconds,
				// reverse from current frame, wait for one second, play from frame 0
				this.play().wait(2).pause().wait(3).reverse().wait(1).play(0);
			});


			// register an event on the sequenceChange event
			myFlicker.on('sequenceChange', function(seq){
				console.log('transitioned to sprite sequence: %s', seq);
				// this.pause(); // <-- would pause the flicker when transitioning between sequences
			});

		</script>
	</body>
</html>